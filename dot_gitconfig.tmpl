[user]
	# Set your git user information
	# You can override these with environment variables or local config
{{- if .gitconfig }}
{{-   if .gitconfig.name }}
	name = {{ .gitconfig.name }}
{{-   else }}
	name = {{ .chezmoi.username }}
{{-   end }}
{{-   if .gitconfig.email }}
	email = {{ .gitconfig.email }}
{{-   end }}
{{- else }}
	# name = Your Name
	# email = your.email@example.com
{{- end }}

[init]
	defaultBranch = main

[core]
	editor = {{ .editor | default "vim" }}
	autocrlf = false
	eol = lf
	# Use delta for better diffs if available
{{- if lookPath "delta" }}
	pager = delta
{{- else }}
	pager = less -R
{{- end }}

[color]
	ui = auto
	diff = auto
	status = auto
	branch = auto

[push]
	default = simple
	autoSetupRemote = true

[pull]
	rebase = false

[fetch]
	prune = true

[rebase]
	autoStash = true

[merge]
	conflictstyle = diff3
{{- if lookPath "code" }}
	tool = vscode
{{- else if lookPath "vim" }}
	tool = vimdiff
{{- end }}

[diff]
{{- if lookPath "delta" }}
	colorMoved = default
{{- end }}
{{- if lookPath "code" }}
	tool = vscode
{{- end }}

{{- if lookPath "delta" }}
[delta]
	navigate = true
	light = false
	side-by-side = true
	line-numbers = true
{{- end }}

{{- if lookPath "code" }}
[mergetool "vscode"]
	cmd = code --wait $MERGED

[difftool "vscode"]
	cmd = code --wait --diff $LOCAL $REMOTE
{{- end }}

[alias]
	# Basic shortcuts
	st = status
	co = checkout
	br = branch
	ci = commit
	ca = commit -a
	cm = commit -m
	cam = commit -am
	
	# Logging
	lg = log --oneline --graph --decorate
	lga = log --oneline --graph --decorate --all
	ll = log --pretty=format:'%C(yellow)%h%Creset %C(blue)%ad%Creset %C(green)%an%Creset %s %C(red)%d%Creset' --date=short
	
	# Diff shortcuts
	df = diff
	dc = diff --cached
	
	# Reset shortcuts
	unstage = reset HEAD --
	undo = reset --soft HEAD^
	
	# Stash shortcuts
	sl = stash list
	sa = stash apply
	ss = stash save
	
	# Remote shortcuts
	pl = pull
	ps = push
	pso = push origin
	psu = push -u origin
	
	# Branch management
	cleanup = "!git branch --merged | grep -v '\\*\\|main\\|master\\|develop' | xargs -n 1 git branch -d"
	
	# Show current branch
	current = branch --show-current
	
	# Quick amend
	amend = commit --amend --no-edit
	
	# Show ignored files
	ignored = ls-files --others --ignored --exclude-standard

# Platform-specific configurations
{{- if eq .chezmoi.os "windows" }}
[credential]
	helper = manager-core

[core]
	# Windows-specific settings
	symlinks = false
	longpaths = true
{{- else if eq .chezmoi.os "darwin" }}
[credential]
	helper = osxkeychain
{{- else }}
[credential]
	helper = store
{{- end }}

# Include local git config if it exists
[include]
	path = ~/.gitconfig.local

# GitHub-specific settings
{{- if lookPath "gh" }}
[hub]
	protocol = https
{{- end }}

# URL shortcuts for common repositories
[url "git@github.com:"]
	insteadOf = gh:
	pushInsteadOf = github:
	pushInsteadOf = git://github.com/

[url "git://github.com/"]
	insteadOf = github:

[url "git@gist.github.com:"]
	insteadOf = gst:
	pushInsteadOf = gist:
	pushInsteadOf = git://gist.github.com/

[url "git://gist.github.com/"]
	insteadOf = gist: